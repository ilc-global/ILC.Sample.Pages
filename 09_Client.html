<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="fb_path" content="Training:Window">
    <meta name="fb_modules" content="">
    <meta name="fb_title" content="09 Client">    
    <title>Client</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <h1>Client</h1>
        <p>Click the button to retrieve information from fb_client.</p>

        <button class="btn btn-primary mb-3" id="btn_execute">Retrieve Data</button>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Result</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Company Name</td><td id="company_name">-</td></tr>
                <tr><td>User ID</td><td id="user_id">-</td></tr>
                <tr><td>Username</td><td id="username">-</td></tr>
                <tr><td>User Email</td><td id="user_email">-</td></tr>
                <tr><td>Module Name</td><td id="module_name">-</td></tr>
                <tr><td>Object ID</td><td id="object_id">-</td></tr>
                <tr><td>Reload Object</td><td id="reload_object">-</td></tr>
            </tbody>
        </table>

        <div class="form-group">
            <label>Execution Log:</label>
            <textarea class="form-control" id="execution_log" rows="3" readonly></textarea>
        </div>
    </div>

    <script>
        $(document).ready(function(){
            $("#btn_execute").click(function () {
                let log = "";

                try {
                    $("#company_name").text(fb_client.getCompanyName());
                    log += "fb_client.getCompanyName() executed successfully\n";
                } catch (error) {
                    $("#company_name").text("Error");
                    log += "Error executing getCompanyName: " + error + "\n";
                }

                try {
                    $("#user_id").text(fb_client.getUserId());
                    log += "fb_client.getUserId() executed successfully\n";
                } catch (error) {
                    $("#user_id").text("Error");
                    log += "Error executing getUserId: " + error + "\n";
                }

                try {
                    $("#username").text(fb_client.getUsername());
                    log += "fb_client.getUsername() executed successfully\n";
                } catch (error) {
                    $("#username").text("Error");
                    log += "Error executing getUsername: " + error + "\n";
                }

                try {
                    $("#user_email").text(fb_client.getUserEmail());
                    log += "fb_client.getUserEmail() executed successfully\n";
                } catch (error) {
                    $("#user_email").text("Error");
                    log += "Error executing getUserEmail: " + error + "\n";
                }

                try {
                    $("#module_name").text(fb_client.getModuleName());
                    log += "fb_client.getModuleName() executed successfully\n";
                } catch (error) {
                    $("#module_name").text("Error");
                    log += "Error executing getModuleName: " + error + "\n";
                }

                try {
                    $("#object_id").text(fb_client.getObjectId());
                    log += "fb_client.getObjectId() executed successfully\n";
                } catch (error) {
                    $("#object_id").text("Error");
                    log += "Error executing getObjectId: " + error + "\n";
                }

                try {
                    let reloadSuccess = fb_client.reloadObject();
                    $("#reload_object").text(reloadSuccess ? "Success" : "Failed");
                    log += "fb_client.reloadObject() executed successfully\n";
                } catch (error) {
                    $("#reload_object").text("Error");
                    log += "Error executing reloadObject: " + error + "\n";
                }

                $("#execution_log").val(log);
            });
        });
    </script>
</body>
</html>
